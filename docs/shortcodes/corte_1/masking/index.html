<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Masking # Exercise
Implement a kinegram and some moiré patterns which are close related visual phenomena to masking.
Solution: # Code Implementation let pic let pic2 let x = 0 let canvassizex = 680; let canvassizey = 575; let imagesize = canvassizex / 2; let tileCount = 0; let mycolor = [0, 0, 0]; let speed = 1; let input; let button; function preload() { pic = loadImage('/showcase/sketches/kinegram.jpg'); input = createInput(); } function setup() { createCanvas(canvassizex, canvassizey); typeSelect = createRadio(); typeSelect."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Masking # Exercise
Implement a kinegram and some moiré patterns which are close related visual phenomena to masking.
Solution: # Code Implementation let pic let pic2 let x = 0 let canvassizex = 680; let canvassizey = 575; let imagesize = canvassizex / 2; let tileCount = 0; let mycolor = [0, 0, 0]; let speed = 1; let input; let button; function preload() { pic = loadImage('/showcase/sketches/kinegram.jpg'); input = createInput(); } function setup() { createCanvas(canvassizex, canvassizey); typeSelect = createRadio(); typeSelect."><meta property="og:type" content="article"><meta property="og:url" content="https://jumorap.github.io/showcase/docs/shortcodes/corte_1/masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-03-30T15:52:21-05:00"><title>Masking | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-98eb846fa59edb294aae7910c3c642ec class=toggle checked>
<label for=section-98eb846fa59edb294aae7910c3c642ec class="flex justify-between"><a role=button>Corte 1</a></label><ul><li><a href=/showcase/docs/shortcodes/corte_1/color/>Color</a></li><li><a href=/showcase/docs/shortcodes/corte_1/depthPerception/>Depth Perception</a></li><li><a href=/showcase/docs/shortcodes/corte_1/machBands/>Mach Bands</a></li><li><a href=/showcase/docs/shortcodes/corte_1/masking/ class=active>Masking</a></li><li><a href=/showcase/docs/shortcodes/corte_1/SpatialCoherence/>Spatial Coherence</a></li></ul></li><li><input type=checkbox id=section-054e72caecd528c85f6d2359bf2d2e8c class=toggle>
<label for=section-054e72caecd528c85f6d2359bf2d2e8c class="flex justify-between"><a role=button>Introducing Myself</a></label><ul><li><a href=/showcase/docs/shortcodes/introducingMyself/jleonro/>Jleonro</a></li><li><a href=/showcase/docs/shortcodes/introducingMyself/jumorap/>Jumorap</a></li><li><a href=/showcase/docs/shortcodes/introducingMyself/ycuervob/>Ycuervob</a></li></ul></li><li><input type=checkbox id=section-c1868768dbab1c4e29bff25ddfd9a301 class=toggle>
<label for=section-c1868768dbab1c4e29bff25ddfd9a301 class="flex justify-between"><a role=button>Tutoriales</a></label><ul><li><a href=/showcase/docs/shortcodes/tutoriales/buttons/>Buttons</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/columns/>Columns</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/details/>Details</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/hints/>Hints</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/katex/>Katex</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-047615443b93f7846685e44979fc65bd class=toggle>
<label for=section-047615443b93f7846685e44979fc65bd class="flex justify-between"><a href=/showcase/docs/shortcodes/tutoriales/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/tutoriales/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/p5/div/>Div</a></li></ul></li><li><a href=/showcase/docs/shortcodes/tutoriales/tabs/>Tabs</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Masking</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#masking>Masking</a></li><li><a href=#solution>Solution:</a><ul><li><a href=#description>Description</a></li><li><a href=#instructions>Instructions</a></li></ul></li><li><a href=#solution-1>Solution:</a><ul><li><a href=#floyd-steinberg-dithering>Floyd-Steinberg Dithering</a></li><li><a href=#random-dithering>Random Dithering</a></li></ul></li><li><a href=#solution-2>Solution:</a><ul><li><a href=#kernel-convolution>Kernel Convolution</a><ul><li><a href=#description-1>Description</a></li></ul></li><li><a href=#lightness-tools>Lightness tools</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=masking>Masking
<a class=anchor href=#masking>#</a></h1><blockquote class="book-hint info"><p><strong>Exercise</strong></p><p>Implement a kinegram and some moiré patterns which are close related visual phenomena to masking.</p></blockquote><h1 id=solution>Solution:
<a class=anchor href=#solution>#</a></h1><p><iframe id=kinegram style=width:700px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/kinegram.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pic</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pic2</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>680</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvassizey</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>575</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imagesize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tileCount</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mycolor</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>speed</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>button</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/sketches/kinegram.jpg&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createInput</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>canvassizex</span>, <span style=color:#a6e22e>canvassizey</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRadio</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;kinegram&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;kinegram2&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;kinegram3&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;font-size&#39;</span>, <span style=color:#e6db74>&#39;10px&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;text-align&#39;</span>, <span style=color:#e6db74>&#39;center&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;align&#39;</span>, <span style=color:#e6db74>&#39;center&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>value</span>(<span style=color:#e6db74>&#39;Normal vision&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>changed</span>(<span style=color:#a6e22e>program</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create a slider element and position it on the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>slider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>300</span>, <span style=color:#a6e22e>tileCount</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tileCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>speedslider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>10</span>, <span style=color:#a6e22e>speed</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>speedslider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>speedslider</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>speed</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>speedslider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#a6e22e>red</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mycolor</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#a6e22e>green</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mycolor</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#a6e22e>blue</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>60</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mycolor</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Create a text input and button
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>canvassizey</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createButton</span>(<span style=color:#e6db74>&#39;imge URL or reset&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>canvassizey</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>buttonpressed</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buttonpressed</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;/showcase/sketches/kinegram.jpg&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>url</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imagesize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>program</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pic</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/sketches/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;.jpg&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>value</span>()) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;kinegram&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>imagesize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;kinegram2&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>imagesize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvassizex</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#39;kinegram3&#39;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>imagesize</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>50</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imageMode</span>(<span style=color:#a6e22e>CENTER</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pic</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#a6e22e>imagesize</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>pic</span>, <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>canvassizey</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2000</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>8</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stroke</span>(<span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>mycolor</span>))
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>line</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>tileCount</span>, <span style=color:#ae81ff>30</span>, <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>height</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>line</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>tileCount</span>, <span style=color:#ae81ff>30</span>, <span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>height</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rect</span>(<span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>240</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>230</span>, <span style=color:#ae81ff>60</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#34;R&#34;</span>, <span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>230</span>, <span style=color:#ae81ff>25</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#34;G&#34;</span>, <span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>230</span>, <span style=color:#ae81ff>45</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#34;B&#34;</span>, <span style=color:#a6e22e>canvassizex</span><span style=color:#f92672>-</span><span style=color:#ae81ff>230</span>, <span style=color:#ae81ff>65</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>canvassizex</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>speed</span> <span style=color:#f92672>*</span><span style=color:#ae81ff>0.2</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details></p><h2 id=description>Description
<a class=anchor href=#description>#</a></h2><p>This program displays a selected image and creates a dynamic pattern of lines over it. The user can select the image from three options available in a radio button. The user can also adjust the number of lines and their colors using sliders. The user can input a URL to display a different image.</p><h2 id=instructions>Instructions
<a class=anchor href=#instructions>#</a></h2><ul><li>Select an image from the radio button labeled &ldquo;Image type&rdquo;.</li><li>Adjust the number of lines using the &ldquo;Line Count&rdquo; slider.</li><li>Adjust the speed of the pattern using the &ldquo;Speed&rdquo; slider.</li><li>Adjust the color of the lines using the &ldquo;R&rdquo;, &ldquo;G&rdquo;, and &ldquo;B&rdquo; sliders.</li><li>Optionally, input a URL for a different image in the input box at the bottom left corner of the canvas.</li><li>Click the &ldquo;Image URL or reset&rdquo; button to load the selected image or reset the canvas to the default image.</li></ul><blockquote class="book-hint info"><p><strong>Exercise</strong></p><p>Research & implement some dither visual apps.</p></blockquote><h1 id=solution-1>Solution:
<a class=anchor href=#solution-1>#</a></h1><p>First of all, we shall see how to reduce the number of colors of an image without applying a dithering algorithm, naturally we will apply some color reduction function that map each color from each pixel to the closest in the reduced mapping, the below p5 implementation show the naivest way of reducing color on an image without using a dithering algorithm.</p><details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#75715e>// your code here
</span></span></span></code></pre></div></div></details><iframe id=naivedither style=width:700px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/naivedither.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=floyd-steinberg-dithering>Floyd-Steinberg Dithering
<a class=anchor href=#floyd-steinberg-dithering>#</a></h2><details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>venus</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>680</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvassizey</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>575</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tileCount</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>globalimg</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>venusOriginal</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#34;/showcase/sketches/venus.jpg&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>canvassizex</span>, <span style=color:#a6e22e>canvassizey</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>resizeCanvas</span>(<span style=color:#a6e22e>canvassizex</span>, <span style=color:#a6e22e>venusOriginal</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>slider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>10</span>, <span style=color:#a6e22e>tileCount</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>venusOriginal</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>tileCount</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>slider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>drawImages</span>();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawImages</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawImages</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>venusOriginal</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#34;/showcase/sketches/venus.jpg&#34;</span>, <span style=color:#a6e22e>img</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>globalimg</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>makeDithered</span>(<span style=color:#a6e22e>tileCount</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>rect</span>(<span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>venusOriginal</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#34;Using:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>tileCount</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>3</span>)<span style=color:#f92672>+</span><span style=color:#e6db74>&#34; colors!&#34;</span>, <span style=color:#ae81ff>15</span>, <span style=color:#a6e22e>venusOriginal</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>18</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Finds the closest step for a given value
</span></span></span><span style=display:flex><span><span style=color:#75715e>// The step 0 is always included, so the number of steps
</span></span></span><span style=display:flex><span><span style=color:#75715e>// is actually steps + 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>closestStep</span>(<span style=color:#a6e22e>steps</span>, <span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>steps</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>floor</span>(<span style=color:#ae81ff>255</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>steps</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>makeDithered</span>(<span style=color:#a6e22e>tileCount</span>) {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pixs</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>pixels</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>width</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>oldR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span>];
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>oldG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>oldB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>closestStep</span>(<span style=color:#a6e22e>tileCount</span>, <span style=color:#a6e22e>oldR</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>closestStep</span>(<span style=color:#a6e22e>tileCount</span>, <span style=color:#a6e22e>oldG</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>newB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>closestStep</span>(<span style=color:#a6e22e>tileCount</span>, <span style=color:#a6e22e>oldB</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>newR</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>newG</span>;
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>newB</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>quant_error_R</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>oldR</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>newR</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>quant_error_G</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>oldG</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>newG</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>quant_error_B</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>oldB</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>newB</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_R</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>5</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_G</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>6</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_B</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_R</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_G</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_B</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_R</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_G</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_B</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_R</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>5</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_G</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>pixs</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>6</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>] <span style=color:#f92672>+=</span> <span style=color:#a6e22e>quant_error_B</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>16</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>globalimg</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#a6e22e>canvassizex</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>globalimg</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>venusOriginal</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><iframe id=dither style=width:700px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/dither.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p><code>Use p5 slader to increase color space! ↑</code></p><p>Floyd-Steinberg dithering is a way of converting a color image into a simpler, lower-quality image with fewer colors. It does this by spreading out the &ldquo;error&rdquo; between the original colors and the new, simplified colors to the surrounding pixels.</p><p>The algorithm works by scanning the image one pixel at a time, from left to right and top to bottom. For each pixel, it finds the closest available color in the new, simplified color palette. It then sets that pixel to the new color, and calculates the difference between the original color and the new color - this difference is called the &ldquo;quantization error&rdquo;.</p><p>The algorithm then spreads this quantization error to the surrounding pixels, in a specific pattern, using a set of coefficients. These coefficients determine how much of the quantization error is spread to each surrounding pixel. By spreading out the error in this way, the algorithm is able to reduce the visible &ldquo;banding&rdquo; effect that can occur when converting images with many colors to a smaller number of colors.</p><p>Floyd-Steinberg dithering is often used when converting images to GIF format, which is limited to a maximum of 256 colors.</p><p>The code uses the pseudocode of the general algorith:</p><pre tabindex=0><code class=language-Pseudocode data-lang=Pseudocode>for each y from top to bottom do
    for each x from left to right do
        oldpixel := pixels[x][y]
        newpixel := find_closest_palette_color(oldpixel)
        pixels[x][y] := newpixel
        quant_error := oldpixel - newpixel
        pixels[x + 1][y    ] := pixels[x + 1][y    ] + quant_error × 7 / 16
        pixels[x - 1][y + 1] := pixels[x - 1][y + 1] + quant_error × 3 / 16
        pixels[x    ][y + 1] := pixels[x    ][y + 1] + quant_error × 5 / 16
        pixels[x + 1][y + 1] := pixels[x + 1][y + 1] + quant_error × 1 / 16
</code></pre><h2 id=random-dithering>Random Dithering
<a class=anchor href=#random-dithering>#</a></h2><details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>controlFactor</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.1</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvassizex</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>680</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvassizey</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>400</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>venus</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>venus</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#34;/showcase/sketches/venus.jpg&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>canvassizex</span>, <span style=color:#a6e22e>canvassizey</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>venus</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>onleftpressed</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mouseClicked</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#34;/showcase/sketches/venus.jpg&#34;</span>, <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>img</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>venus</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>onleftpressed</span>();
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myx</span>(<span style=color:#a6e22e>u</span>, <span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>steps</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>steps</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>u</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>value</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>floor</span>(<span style=color:#ae81ff>255</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>steps</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>onleftpressed</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>venus</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pix</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>venus</span>.<span style=color:#a6e22e>pixels</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>pix</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>4</span>) {
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>myx</span>(Math.<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>i</span>]);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>myx</span>(Math.<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>myx</span>(Math.<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>), <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>venus</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>venus</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><iframe id=dither2 style=width:700px;height:450px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/dither2.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>Random dithering is a simple algorithm used for converting images from a higher number of colors to a lower number of colors. For example, if an image has 256 colors but we want to display it on a device that can only show 16 colors, we need to convert the image to use only those 16 colors.</p><p>The algorithm works by dividing the color space into a grid of pixels, where each pixel represents a color from the available palette. Then, for each pixel in the original image, the algorithm randomly chooses one of the pixels in the grid that best approximates the original color. The result is a new image that uses only the available colors in the palette.</p><p>The advantage of random dithering is that it is fast and simple to implement. However, the resulting image may have visible artifacts, such as color banding or noise, especially if the available palette has a small number of colors or if the original image has subtle color gradients.</p><p>Overall, random dithering can be a useful technique for reducing the number of colors in an image and generate kind of noise on it, but it may not be the best choice for high-quality or precise color reproduction.</p><blockquote class="book-hint info"><p><strong>Exercise</strong></p><p>Implement in software an image processing web app supporting different image kernels and supporting:</p><ul><li>Image histogram visualization.</li><li>Different lightness (coloring brightness) tools.</li></ul></blockquote><h1 id=solution-2>Solution:
<a class=anchor href=#solution-2>#</a></h1><h2 id=kernel-convolution>Kernel Convolution
<a class=anchor href=#kernel-convolution>#</a></h2><details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>kernels</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>identity</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>edge0</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>edge1</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>edge2</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>8</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sharpen</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>5</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>boxBlur</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    ].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> =&gt; <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>val</span> =&gt; <span style=color:#a6e22e>val</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.1111</span>)),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gaussianBlur</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>2</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    ].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>row</span> =&gt; <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>val</span> =&gt; <span style=color:#a6e22e>val</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.0625</span>)),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>emboss</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>        [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>, <span style=color:#a6e22e>input</span>, <span style=color:#a6e22e>typeSelect</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>canvasValues</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>650</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>550</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>saul</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;/showcase/sketches/goodman.jpg&#34;</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>saul</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createInput</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>typeSelect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRadio</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a canvas to display the image and color mapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>imageMode</span>(<span style=color:#a6e22e>CENTER</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Create a text input and button
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createButton</span>(<span style=color:#e6db74>&#39;imge URL or reset&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>width</span>, <span style=color:#ae81ff>5</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#a6e22e>i</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>kernels</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#a6e22e>i</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Histograma&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;font-size&#39;</span>, <span style=color:#e6db74>&#39;10px&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>40</span>); 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>changed</span>(<span style=color:#a6e22e>updateImage</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>updateImage</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, (<span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createRGBHistogram</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updateImage</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>imgURL</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>||</span> <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>saul</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Histograma&#34;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>createRGBHistogram</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>loadImage</span>(<span style=color:#a6e22e>imgURL</span>, <span style=color:#a6e22e>myimg</span> =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>myimg</span>;
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>applyConvolution</span>(<span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, (<span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>applyConvolution</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pix</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sup</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>inf</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>kernelname</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>typeSelect</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;identity&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>kernelselect</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>kernels</span>[<span style=color:#a6e22e>kernelname</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imageIndex</span>(<span style=color:#a6e22e>img</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>neighborIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imageIndex</span>(<span style=color:#a6e22e>img</span>, <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>r</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>kernelselect</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>neighborIndex</span>];
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>g</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>kernelselect</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>neighborIndex</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>b</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>kernelselect</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>neighborIndex</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>index</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>inf</span>, <span style=color:#a6e22e>sup</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>g</span>, <span style=color:#a6e22e>inf</span>, <span style=color:#a6e22e>sup</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>pix</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>constrain</span>(<span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>inf</span>, <span style=color:#a6e22e>sup</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>imageIndex</span>(<span style=color:#a6e22e>img</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>*</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Función para crear un histograma de colores RGB
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>createRGBHistogram</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Crear arrays vacíos para almacenar los valores de cada canal de color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>redValues</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>greenValues</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>blueValues</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Loop a través de todos los píxeles en la imagen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Obtener el valor de color del píxel actual
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pixelColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Añadir los valores de los canales de color a los arrays correspondientes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>redValues</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>pixelColor</span>));
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>greenValues</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>pixelColor</span>));
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>blueValues</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>pixelColor</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Establecer el color de fondo
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Dibujar el histograma para cada canal de color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>drawHistogram</span>(<span style=color:#a6e22e>redValues</span>, <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawHistogram</span>(<span style=color:#a6e22e>greenValues</span>, <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawHistogram</span>(<span style=color:#a6e22e>blueValues</span>, <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Función para dibujar un histograma para un canal de color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawHistogram</span>(<span style=color:#a6e22e>values</span>, <span style=color:#a6e22e>col</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Crear un array vacío para almacenar el número de píxeles con cada valor de canal de color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>counts</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>256</span>).<span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>max</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Loop a través de todos los valores de canal de color y contar el número de píxeles para cada valor
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>values</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>counts</span>[<span style=color:#a6e22e>values</span>[<span style=color:#a6e22e>i</span>]]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>counts</span>[<span style=color:#a6e22e>values</span>[<span style=color:#a6e22e>i</span>]] <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>max</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>max</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>counts</span>[<span style=color:#a6e22e>values</span>[<span style=color:#a6e22e>i</span>]];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>offsetx</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>((<span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>width</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Loop a través de todos los posibles valores de canal de color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>counts</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Dibujar una línea vertical para el valor del canal de color y la altura correspondiente
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mappedHeight</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>counts</span>[<span style=color:#a6e22e>i</span>], <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>max</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mappedHeight2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>counts</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>], <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>max</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>stroke</span>(<span style=color:#a6e22e>col</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>line</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>offsetx</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>mappedHeight</span>) <span style=color:#f92672>-</span> <span style=color:#ae81ff>40</span>, <span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>offsetx</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>offsetx</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>round</span>(<span style=color:#a6e22e>mappedHeight2</span>)<span style=color:#f92672>-</span><span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>50</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>textSize</span>(<span style=color:#ae81ff>15</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>text</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>offsetx</span>, <span style=color:#a6e22e>canvasValues</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><iframe id=kernels style=width:700px;height:600px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/kernels.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>Kernel convolution is a mathematical operation that is used in digital image processing to apply various image processing operations, such as edge detection, blur, sharpening, and more. It involves sliding a small matrix, called a kernel or filter, over an image and computing the dot product between the kernel and a corresponding small section of the image, usually a 3x3 or 5x5 pixel area.</p><p>For each pixel in the image, the kernel is centered over the pixel and the dot product is computed between the kernel and the surrounding pixels in the image. The result of this computation is a new value for the central pixel, which is usually a weighted sum of the values of the surrounding pixels.</p><p>The values in the kernel determine the specific operation that is being performed. For example, a kernel that is used for edge detection may have positive values on one side and negative values on the other, which helps to highlight the edges in an image. A kernel that is used for blur may have all positive values that are divided by the sum of the values, which helps to smooth out the image.</p><p>Convolution can be applied to color images by treating each color channel (red, green, and blue) separately, or by using a single kernel that takes into account all three color channels at once.</p><p>In summary, kernel convolution is a process of sliding a small matrix over an image and computing the dot product between the kernel and the surrounding pixels. The result is a new value for each pixel that is a weighted sum of the surrounding pixels, and the values in the kernel determine the specific operation being performed.</p><h3 id=description-1>Description
<a class=anchor href=#description-1>#</a></h3><p>The provided code is a basic image processing program that allows you to apply different convolution filters to an image. Below are the instructions for using the program:</p><ol><li><p>When you first load the program, an image will be displayed in the canvas. You can use the default image or provide your own image by entering its URL in the text input box located at the top of the page.</p></li><li><p>To apply a filter to the image, select the filter from the radio buttons located just below the text input box.</p></li><li><p>Once you have selected a filter, click the &ldquo;imge URL or reset&rdquo; button to apply the filter to the image.</p></li><li><p>The program supports several different filters, including identity, edge detection, box blur, and Gaussian blur, among others. You can see a list of available filters in the &ldquo;kernels&rdquo; object located near the top of the code.</p></li><li><p>In addition to filters, the program also includes a &ldquo;Histograma&rdquo; option in the radio button list. Selecting this option will generate an RGB histogram of the current image.</p></li><li><p>The program will automatically update the image whenever you change the input image or select a new filter. If you want to reset the image to its original state, you can simply reload the page.</p></li></ol><h2 id=lightness-tools>Lightness tools
<a class=anchor href=#lightness-tools>#</a></h2><details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JavaScript data-lang=JavaScript><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hueSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>saturationSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>brightnessSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>button</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;https://http2.mlstatic.com/D_NQ_NP_866685-MLC29350122842_022019-O.jpg&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createInput</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>400</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Crea el slider de Hue
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>hueSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>360</span>, <span style=color:#ae81ff>360</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hueSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Agrega una etiqueta para el slider de Hue
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hueLabel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;label&#39;</span>, <span style=color:#e6db74>&#39;Hue&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hueLabel</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>150</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>hueLabel</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;marginTop&#39;</span>, <span style=color:#e6db74>&#39;20px&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Crea el slider de Saturation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>saturationSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>127</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>saturationSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Agrega una etiqueta para el slider de Saturation
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>saturationLabel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;label&#39;</span>, <span style=color:#e6db74>&#39;Saturation&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>saturationLabel</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>150</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>saturationLabel</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;marginTop&#39;</span>, <span style=color:#e6db74>&#39;20px&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Crea el slider de Brightness
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>brightnessSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>brightnessSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>80</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Agrega una etiqueta para el slider de Brightness
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>brightnessLabel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;label&#39;</span>, <span style=color:#e6db74>&#39;Brightness&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>brightnessLabel</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>150</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>60</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>brightnessLabel</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;marginTop&#39;</span>, <span style=color:#e6db74>&#39;20px&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Actualiza la imagen cuando se mueve alguno de los sliders
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>hueSlider</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>drawupdate</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>saturationSlider</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>drawupdate</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>brightnessSlider</span>.<span style=color:#a6e22e>input</span>(<span style=color:#a6e22e>drawupdate</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Create a text input and button
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createButton</span>(<span style=color:#e6db74>&#39;imge URL or reset&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>position</span>(<span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>width</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawupdate</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>angle</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>radians</span>(<span style=color:#a6e22e>hueSlider</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cos</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>angle</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sin</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>angle</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>matrix</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cos</span> <span style=color:#f92672>+</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>-</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin</span>, <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin</span>, <span style=color:#a6e22e>cos</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>), <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>-</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin</span>,
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>-</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin</span>, <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>) <span style=color:#f92672>+</span> Math.<span style=color:#a6e22e>sqrt</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>sin</span>, <span style=color:#a6e22e>cos</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cos</span>)
</span></span><span style=display:flex><span>  ];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>y</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>y</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>x</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>width</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>||</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>average</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>r</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>5</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>matrix</span>[<span style=color:#ae81ff>8</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>average</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>newR</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>average</span>) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>saturationSlider</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>127</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>brightnessSlider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>average</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>newG</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>average</span>) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>saturationSlider</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>127</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>brightnessSlider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>index</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>average</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>newB</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>average</span>) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>saturationSlider</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>/</span> <span style=color:#ae81ff>127</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>brightnessSlider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>rotatehueofcolor</span>(<span style=color:#a6e22e>c</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>sort</span>((<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) =&gt; { <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>nombre</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>nombre</span>) { <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>a</span>.<span style=color:#a6e22e>nombre</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>nombre</span>) { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span> } <span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span> } });
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cmax</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>c</span>[<span style=color:#ae81ff>2</span>].<span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cmin</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>c</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>value</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dif</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cmax</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cmin</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>hueSlider</span>.<span style=color:#a6e22e>value</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>postomod</span> <span style=color:#f92672>=</span> (Math.<span style=color:#a6e22e>floor</span>((<span style=color:#a6e22e>hue</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>c</span>[<span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>value</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>cmin</span>) <span style=color:#f92672>/</span> <span style=color:#a6e22e>dif</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>dif</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>c</span>[Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>postomod</span>)].<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>c</span>[Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>postomod</span>)].<span style=color:#a6e22e>value</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>hue</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>;
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><iframe id=brightness style=width:450px;height:510px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/brightness.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>The given code is a Lightness tool that allows the user to adjust the hue, saturation, and brightness of an image using sliders. It applies a color matrix to the image to rotate the hue, which is controlled by the hueSlider slider. The saturation and brightness of the image are also adjusted by the saturationSlider and brightnessSlider, respectively.</p><p>The color matrix used to rotate the hue is based on the HSL (hue, saturation, lightness) color model, where the hue is rotated around the color wheel. The matrix is calculated using the angle of rotation provided by the hueSlider and is used to transform the RGB color values of each pixel in the image. The resulting colors are then adjusted based on the saturation and brightness sliders.</p><p>The drawupdate() function is called every time the user interacts with any of the three sliders, updating the image with the new settings. The function first clears the canvas with a black background, then loads the original image and applies the color matrix and the saturation and brightness adjustments to each pixel. Finally, the updated pixels are displayed on the canvas using the updatePixels() function.</p><p>Overall, the code provides a simple and interactive way to adjust the color and brightness of an image, making it a useful tool for image editing and manipulation.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/jumorap/showcase/commit/341f2a2a5ef7cf81232688ee47a1b5d561857c77 title='Last modified by Yeison Cuervo Basurto | March 30, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>March 30, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#masking>Masking</a></li><li><a href=#solution>Solution:</a><ul><li><a href=#description>Description</a></li><li><a href=#instructions>Instructions</a></li></ul></li><li><a href=#solution-1>Solution:</a><ul><li><a href=#floyd-steinberg-dithering>Floyd-Steinberg Dithering</a></li><li><a href=#random-dithering>Random Dithering</a></li></ul></li><li><a href=#solution-2>Solution:</a><ul><li><a href=#kernel-convolution>Kernel Convolution</a><ul><li><a href=#description-1>Description</a></li></ul></li><li><a href=#lightness-tools>Lightness tools</a></li></ul></li></ul></nav></div></aside></main></body></html>