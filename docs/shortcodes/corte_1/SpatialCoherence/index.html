<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Spatial Coherence # Exercise
Spatial coherence is the visual phenomenon present all across nature whereby the perceived colors of two given points within a region of interest tend to vary more according to their relative distance.
Exercise Implement a pixelator video application and perform a benchmark of the results (color avg vs spatial coherence). How would you assess the visual quality of the results?
Solution # Implemention of a pixelator video application:"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Spatial Coherence # Exercise
Spatial coherence is the visual phenomenon present all across nature whereby the perceived colors of two given points within a region of interest tend to vary more according to their relative distance.
Exercise Implement a pixelator video application and perform a benchmark of the results (color avg vs spatial coherence). How would you assess the visual quality of the results?
Solution # Implemention of a pixelator video application:"><meta property="og:type" content="article"><meta property="og:url" content="https://jumorap.github.io/showcase/docs/shortcodes/corte_1/SpatialCoherence/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-05T16:54:21-05:00"><title>Spatial Coherence | Showcase Template</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.3a8d658c77eb93c7f12a2b8af49a700131e474f288eefb605d9fa61576dbe5a7.js integrity="sha256-Oo1ljHfrk8fxKiuK9JpwATHkdPKI7vtgXZ+mFXbb5ac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Showcase Template</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Shortcodes</span><ul><li><input type=checkbox id=section-98eb846fa59edb294aae7910c3c642ec class=toggle checked>
<label for=section-98eb846fa59edb294aae7910c3c642ec class="flex justify-between"><a role=button>Corte 1</a></label><ul><li><a href=/showcase/docs/shortcodes/corte_1/color/>Color</a></li><li><a href=/showcase/docs/shortcodes/corte_1/depthPerception/>Depth Perception</a></li><li><a href=/showcase/docs/shortcodes/corte_1/machBands/>Mach Bands</a></li><li><a href=/showcase/docs/shortcodes/corte_1/masking/>Masking</a></li><li><a href=/showcase/docs/shortcodes/corte_1/SpatialCoherence/ class=active>Spatial Coherence</a></li><li><a href=/showcase/docs/shortcodes/corte_1/video/>Video</a></li></ul></li><li><input type=checkbox id=section-b734f2044c27199f5b28b6ff9e224df3 class=toggle>
<label for=section-b734f2044c27199f5b28b6ff9e224df3 class="flex justify-between"><a role=button>Corte 2</a></label><ul><li><a href=/showcase/docs/shortcodes/corte_2/texturing/>Texturing</a></li></ul></li><li><input type=checkbox id=section-054e72caecd528c85f6d2359bf2d2e8c class=toggle>
<label for=section-054e72caecd528c85f6d2359bf2d2e8c class="flex justify-between"><a role=button>Introducing Myself</a></label><ul><li><a href=/showcase/docs/shortcodes/introducingMyself/jleonro/>Jleonro</a></li><li><a href=/showcase/docs/shortcodes/introducingMyself/jumorap/>Jumorap</a></li><li><a href=/showcase/docs/shortcodes/introducingMyself/ycuervob/>Ycuervob</a></li></ul></li><li><input type=checkbox id=section-c1868768dbab1c4e29bff25ddfd9a301 class=toggle>
<label for=section-c1868768dbab1c4e29bff25ddfd9a301 class="flex justify-between"><a role=button>Tutoriales</a></label><ul><li><a href=/showcase/docs/shortcodes/tutoriales/buttons/>Buttons</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/columns/>Columns</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/details/>Details</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/hints/>Hints</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/katex/>Katex</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-047615443b93f7846685e44979fc65bd class=toggle>
<label for=section-047615443b93f7846685e44979fc65bd class="flex justify-between"><a href=/showcase/docs/shortcodes/tutoriales/p5/>P5</a></label><ul><li><a href=/showcase/docs/shortcodes/tutoriales/p5/iframe/>Iframe</a></li><li><a href=/showcase/docs/shortcodes/tutoriales/p5/div/>Div</a></li></ul></li><li><a href=/showcase/docs/shortcodes/tutoriales/tabs/>Tabs</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Spatial Coherence</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#spatial-coherence>Spatial Coherence</a><ul><li><a href=#solution>Solution</a></li><li><a href=#useful-information>Useful information</a></li><li><a href=#description>Description</a><ul><li><a href=#previuos-work>Previuos Work</a></li><li><a href=#future-work>Future Work</a></li></ul></li><li><a href=#benchmarks>Benchmarks</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=spatial-coherence>Spatial Coherence
<a class=anchor href=#spatial-coherence>#</a></h1><blockquote class="book-hint info"><p><strong>Exercise</strong></p><p>Spatial coherence is the visual phenomenon present all across nature whereby the perceived colors of two given points within a region of interest tend to vary more according to their relative distance.</p><p>Exercise
Implement a pixelator video application and perform a benchmark of the results (color avg vs spatial coherence). How would you assess the visual quality of the results?</p></blockquote><h2 id=solution>Solution
<a class=anchor href=#solution>#</a></h2><p>Implemention of a pixelator video application:</p><details><summary>Code Implementation</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span>let videoFile<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>let pixelateType <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>let tileCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function <span style=color:#a6e22e>setup</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  createCanvas<span style=color:#f92672>(</span><span style=color:#ae81ff>800</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>400</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create a file input element and position it on the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> fileInput <span style=color:#f92672>=</span> createFileInput<span style=color:#f92672>(</span>handleFile<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  fileInput<span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>10</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create a button element and position it on the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> button <span style=color:#f92672>=</span> createButton<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;A&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button<span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>50</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button<span style=color:#f92672>.</span><span style=color:#a6e22e>mousePressed</span><span style=color:#f92672>(()</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    pixelateType <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;color&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create a button element and position it on the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> button2 <span style=color:#f92672>=</span> createButton<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;C&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button2<span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#ae81ff>30</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>50</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button2<span style=color:#f92672>.</span><span style=color:#a6e22e>mousePressed</span><span style=color:#f92672>(()</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    pixelateType <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;coherence&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> button3 <span style=color:#f92672>=</span> createButton<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Benchmark&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button3<span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#ae81ff>50</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>50</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button3<span style=color:#f92672>.</span><span style=color:#a6e22e>mousePressed</span><span style=color:#f92672>(</span>runBenchmark<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create a button element and position it on the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> button4 <span style=color:#f92672>=</span> createButton<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;+&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button4<span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>80</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button4<span style=color:#f92672>.</span><span style=color:#a6e22e>mousePressed</span><span style=color:#f92672>(()</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    tileCount <span style=color:#f92672>=</span> min<span style=color:#f92672>(</span>tileCount <span style=color:#f92672>+</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>50</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// create a button element and position it on the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> button5 <span style=color:#f92672>=</span> createButton<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;-&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button5<span style=color:#f92672>.</span><span style=color:#a6e22e>position</span><span style=color:#f92672>(</span><span style=color:#ae81ff>30</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>80</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  button5<span style=color:#f92672>.</span><span style=color:#a6e22e>mousePressed</span><span style=color:#f92672>(()</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    tileCount <span style=color:#f92672>=</span> max<span style=color:#f92672>(</span>tileCount <span style=color:#f92672>-</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function <span style=color:#a6e22e>draw</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// draw the original video file on the left side of the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>videoFile<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    image<span style=color:#f92672>(</span>videoFile<span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> height<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>key <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;c&#39;</span> <span style=color:#f92672>||</span> key <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;C&#39;</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      pixelateType <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;coherence&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>key <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;a&#39;</span> <span style=color:#f92672>||</span> key <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;A&#39;</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      pixelateType <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;color&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>key <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;+&#39;</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>       tileCount <span style=color:#f92672>=</span> min<span style=color:#f92672>(</span>tileCount <span style=color:#f92672>+</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>40</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>key <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;-&#34;</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>      tileCount <span style=color:#f92672>=</span> max<span style=color:#f92672>(</span>tileCount <span style=color:#f92672>-</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// draw the pixelated video file on the right side of the canvas
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    push<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    translate<span style=color:#f92672>(</span>width <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>pixelateType <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;color&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      pixelateByColorAverage<span style=color:#f92672>(</span>videoFile<span style=color:#f92672>,</span> tileCount<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>pixelateType <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;coherence&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      pixelateBySpatialCoherence<span style=color:#f92672>(</span>videoFile<span style=color:#f92672>,</span> tileCount<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    pop<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function <span style=color:#a6e22e>handleFile</span><span style=color:#f92672>(</span>file<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// load the uploaded video file and store it in the &#39;videoFile&#39; variable
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  videoFile <span style=color:#f92672>=</span> createVideo<span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>data</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  videoFile<span style=color:#f92672>.</span><span style=color:#a6e22e>loop</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  videoFile<span style=color:#f92672>.</span><span style=color:#a6e22e>hide</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function <span style=color:#a6e22e>pixelateByColorAverage</span><span style=color:#f92672>(</span>video<span style=color:#f92672>,</span> tileCount<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> tileSize <span style=color:#f92672>=</span> width<span style=color:#f92672>/</span>tileCount<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  video<span style=color:#f92672>.</span><span style=color:#a6e22e>loadPixels</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let x <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> x <span style=color:#f92672>&lt;</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>width</span><span style=color:#f92672>;</span> x <span style=color:#f92672>+=</span> tileSize<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let y <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> y <span style=color:#f92672>&lt;</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>height</span><span style=color:#f92672>;</span> y <span style=color:#f92672>+=</span> tileSize<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> i <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>y <span style=color:#f92672>*</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> x<span style=color:#f92672>)</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      let r <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> g <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> b <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      let count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let tx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> tx <span style=color:#f92672>&lt;</span> tileSize<span style=color:#f92672>;</span> tx<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let ty <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> ty <span style=color:#f92672>&lt;</span> tileSize<span style=color:#f92672>;</span> ty<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>const</span> ii <span style=color:#f92672>=</span> <span style=color:#f92672>((</span>y<span style=color:#f92672>+</span>ty<span style=color:#f92672>)</span> <span style=color:#f92672>*</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#f92672>(</span>x<span style=color:#f92672>+</span>tx<span style=color:#f92672>))</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>          r <span style=color:#f92672>+=</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>pixels</span><span style=color:#f92672>[</span>ii<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>          g <span style=color:#f92672>+=</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>pixels</span><span style=color:#f92672>[</span>ii<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>          b <span style=color:#f92672>+=</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>pixels</span><span style=color:#f92672>[</span>ii<span style=color:#f92672>+</span><span style=color:#ae81ff>2</span><span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>          count<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>      r <span style=color:#f92672>/=</span> count<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      g <span style=color:#f92672>/=</span> count<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      b <span style=color:#f92672>/=</span> count<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      noStroke<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>      fill<span style=color:#f92672>(</span>r<span style=color:#f92672>,</span> g<span style=color:#f92672>,</span> b<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>      rect<span style=color:#f92672>(</span>x<span style=color:#f92672>,</span> y<span style=color:#f92672>,</span> tileSize<span style=color:#f92672>,</span> tileSize<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function <span style=color:#a6e22e>pixelateBySpatialCoherence</span><span style=color:#f92672>(</span>video<span style=color:#f92672>,</span> tileCount<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> tileSize <span style=color:#f92672>=</span> width<span style=color:#f92672>/</span>tileCount<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  video<span style=color:#f92672>.</span><span style=color:#a6e22e>loadPixels</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  let randomPixelIndex <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let x <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> x <span style=color:#f92672>&lt;</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>width</span><span style=color:#f92672>;</span> x <span style=color:#f92672>+=</span> tileSize<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let y <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> y <span style=color:#f92672>&lt;</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>height</span><span style=color:#f92672>;</span> y <span style=color:#f92672>+=</span> tileSize<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> i <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>y <span style=color:#f92672>*</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> x<span style=color:#f92672>)</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Get the range of pixels within the current tile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> pixels <span style=color:#f92672>=</span> <span style=color:#f92672>[];</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let tx <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> tx <span style=color:#f92672>&lt;</span> tileSize<span style=color:#f92672>;</span> tx<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let ty <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> ty <span style=color:#f92672>&lt;</span> tileSize<span style=color:#f92672>;</span> ty<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>const</span> ii <span style=color:#f92672>=</span> <span style=color:#f92672>((</span>y<span style=color:#f92672>+</span>ty<span style=color:#f92672>)</span> <span style=color:#f92672>*</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#f92672>(</span>x<span style=color:#f92672>+</span>tx<span style=color:#f92672>))</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>          pixels<span style=color:#f92672>.</span><span style=color:#a6e22e>push</span><span style=color:#f92672>({</span>
</span></span><span style=display:flex><span>            r<span style=color:#f92672>:</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>pixels</span><span style=color:#f92672>[</span>ii<span style=color:#f92672>],</span>
</span></span><span style=display:flex><span>            g<span style=color:#f92672>:</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>pixels</span><span style=color:#f92672>[</span>ii<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#f92672>],</span>
</span></span><span style=display:flex><span>            b<span style=color:#f92672>:</span> video<span style=color:#f92672>.</span><span style=color:#a6e22e>pixels</span><span style=color:#f92672>[</span>ii<span style=color:#f92672>+</span><span style=color:#ae81ff>2</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>});</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>      
</span></span><span style=display:flex><span>      <span style=color:#75715e>// Select a random color from the current tile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span><span style=color:#f92672>(!</span>randomPixelIndex<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        randomPixelIndex <span style=color:#f92672>=</span> floor<span style=color:#f92672>(</span>random<span style=color:#f92672>(</span>pixels<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>const</span> randomPixel <span style=color:#f92672>=</span> pixels<span style=color:#f92672>[</span>randomPixelIndex<span style=color:#f92672>];</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      noStroke<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>      fill<span style=color:#f92672>(</span>randomPixel<span style=color:#f92672>.</span><span style=color:#a6e22e>r</span><span style=color:#f92672>,</span> randomPixel<span style=color:#f92672>.</span><span style=color:#a6e22e>g</span><span style=color:#f92672>,</span> randomPixel<span style=color:#f92672>.</span><span style=color:#a6e22e>b</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>      rect<span style=color:#f92672>(</span>x<span style=color:#f92672>,</span> y<span style=color:#f92672>,</span> tileSize<span style=color:#f92672>,</span> tileSize<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>function <span style=color:#a6e22e>runBenchmark</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> startTime <span style=color:#f92672>=</span> performance<span style=color:#f92672>.</span><span style=color:#a6e22e>now</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// run pixelateByColorAverage 100 times
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    pixelateByColorAverage<span style=color:#f92672>(</span>videoFile<span style=color:#f92672>,</span> tileCount<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> elapsedTimeColor <span style=color:#f92672>=</span> performance<span style=color:#f92672>.</span><span style=color:#a6e22e>now</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> startTime<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// reset start time
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> startTime2 <span style=color:#f92672>=</span> performance<span style=color:#f92672>.</span><span style=color:#a6e22e>now</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>// run pixelateBySpatialCoherence 100 times
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>let i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    pixelateBySpatialCoherence<span style=color:#f92672>(</span>videoFile<span style=color:#f92672>,</span> tileCount<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> elapsedTimeCoherence <span style=color:#f92672>=</span> performance<span style=color:#f92672>.</span><span style=color:#a6e22e>now</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> startTime2<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  alert<span style=color:#f92672>(</span><span style=color:#960050;background-color:#1e0010>`</span>
</span></span><span style=display:flex><span>    Elapsed <span style=color:#a6e22e>time</span> <span style=color:#f92672>(</span>coherence<span style=color:#f92672>):</span> $<span style=color:#f92672>{</span>elapsedTimeCoherence<span style=color:#f92672>}</span> ms
</span></span><span style=display:flex><span>    Elapsed <span style=color:#a6e22e>time</span> <span style=color:#f92672>(</span>color<span style=color:#f92672>):</span> $<span style=color:#f92672>{</span>elapsedTimeColor<span style=color:#f92672>}</span> ms
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>`</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span></span></span></code></pre></div></div></details><iframe id=SpatialCoherence style=width:800px;height:400px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/showcase/sketches/SpatialCoherence.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=useful-information>Useful information
<a class=anchor href=#useful-information>#</a></h2><p>Pixelation and spatial coherence are two different methods used for image or video processing, and can have different applications based on the desired outcome.</p><p>Pixelation refers to the process of reducing the resolution of an image or video by dividing it into smaller regions or tiles and replacing each tile with a solid color. This can be useful in situations where a lower resolution or a more abstracted representation of the image or video is desired, such as in some forms of digital art or design. Pixelation can also be used for privacy protection, where a part of an image or video containing sensitive information is replaced with a lower resolution version.</p><p>Spatial coherence refers to the property of an image or video where neighboring pixels are highly correlated in terms of their color or intensity values. This property can be used to create visually pleasing effects, such as smooth transitions between regions of similar color, or to highlight specific features of an image or video. Spatial coherence can be used in various image processing applications, such as noise reduction, edge detection, or object recognition.</p><h2 id=description>Description
<a class=anchor href=#description>#</a></h2><p>The code defines a canvas with a size of 400x400 and creates three user interface elements using p5.js library: a checkbox to toggle between color and spatial coherence pixelation, a file input to upload a video file, and a slider to adjust the tile count of the pixelation.</p><p>The handleFile() function loads the uploaded video file and stores it in a variable called videoFile. The draw() function checks if videoFile is not null and then calls the pixelateByColorAverage() or pixelateBySpatialCoherence() function based on the value of pixelateByColor variable.</p><p>The pixelateByColorAverage() function divides the video into tiles and calculates the average color of each tile, then fills the tile with the calculated color. The pixelateBySpatialCoherence() function fills each tile with the color of the pixel at the top left corner of the tile. Both functions use the loadPixels() method to access the pixel data of the video.</p><p>Overall, this code allows for easy manipulation and pixelation of uploaded video files, with the user able to choose between different pixelation methods and adjust the tile count to achieve different levels of detail.</p><h3 id=previuos-work>Previuos Work
<a class=anchor href=#previuos-work>#</a></h3><p>In terms of previews work, the use of previews in pixelation and spatial coherence has been largely driven by advances in digital technology. In the past, artists and designers had to rely on their intuition and experience to determine how an image or video would look when pixelated or processed using spatial coherence techniques. However, with the advent of digital tools and software, it has become much easier to create previews of pixelated or spatially coherent images and videos.</p><h3 id=future-work>Future Work
<a class=anchor href=#future-work>#</a></h3><p>Future work in pixelation and spatial coherence includes improving the quality of pixelated images and videos, enhancing spatial coherence algorithms, exploring new forms of pixel art and digital media, and developing new tools for creating and previewing pixelated and spatially coherent media. Advances in digital technology and the creative vision of artists, designers, and researchers will shape the future of these areas.</p><h2 id=benchmarks>Benchmarks
<a class=anchor href=#benchmarks>#</a></h2><p>Spatial Coherence algorithm is faster than the Color Coherence algorithm. The average time per iteration for the Spatial Coherence algorithm is 4.96ms, while the average time per iteration for the Color Coherence algorithm is 10.85ms. This means that the Spatial Coherence algorithm can pixelate the video more quickly than the Color Coherence algorithm.</p><p>However, the accuracy of the spatial coherence algorithm is lower than the color coherence algorithm. The Spatial Coherence algorithm has a better-looking result in images that look more similar to the original one.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/jumorap/showcase/commit/b0264644352ae2dc08fd9aa47ea696e75a2e87fd title='Last modified by Jahel Santiago Leon | April 5, 2023' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 5, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#spatial-coherence>Spatial Coherence</a><ul><li><a href=#solution>Solution</a></li><li><a href=#useful-information>Useful information</a></li><li><a href=#description>Description</a><ul><li><a href=#previuos-work>Previuos Work</a></li><li><a href=#future-work>Future Work</a></li></ul></li><li><a href=#benchmarks>Benchmarks</a></li></ul></li></ul></nav></div></aside></main></body></html>